# ====================================
# Demo Site Security Settings
# ====================================

# Basic認証
AuthType Basic
AuthName "YOJITU.COM Demo Site - Access Restricted"
AuthUserFile /Users/yamadaren/Movies/claude-code-projects/yojitu.com/demo/.htpasswd
Require valid-user

# ====================================
# 検索エンジン対策（noindex）
# ====================================
<IfModule mod_headers.c>
    Header set X-Robots-Tag "noindex, nofollow"
</IfModule>

# ====================================
# セキュリティ
# ====================================

# ディレクトリリスティング無効化
Options -Indexes

# 機密ファイルへのアクセス禁止
<FilesMatch "\.(md|htpasswd|git|env|log)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# ====================================
# キャッシュ設定（短め）
# ====================================
<IfModule mod_expires.c>
    ExpiresActive On

    # HTML（1時間 - 頻繁に更新される可能性があるため）
    ExpiresByType text/html "access plus 1 hour"

    # CSS/JS（1日）
    ExpiresByType text/css "access plus 1 day"
    ExpiresByType application/javascript "access plus 1 day"

    # 画像（1週間）
    ExpiresByType image/jpg "access plus 1 week"
    ExpiresByType image/jpeg "access plus 1 week"
    ExpiresByType image/png "access plus 1 week"
    ExpiresByType image/webp "access plus 1 week"
    ExpiresByType image/svg+xml "access plus 1 week"
</IfModule>

# ====================================
# Gzip圧縮
# ====================================
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

# ====================================
# セキュリティヘッダー
# ====================================
<IfModule mod_headers.c>
    Header set X-XSS-Protection "1; mode=block"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-Content-Type-Options "nosniff"
</IfModule>

# ====================================
# PHP設定
# ====================================
AddDefaultCharset UTF-8

# DirectoryIndex
DirectoryIndex index.php index.html
