# ブログ記事作成ガイド

このガイドでは、ブログ記事を作成する際の正しいリンク形式と、用意されたツールの使い方を説明します。

## ❌ 間違ったリンク形式（使わないでください）

```html
<!-- ❌ これらの形式は404エラーになります -->
<a href="../blog/article-81.html">記事タイトル</a>
<a href="article-81.html">記事タイトル</a>
<a href="/blog/article-81.html">記事タイトル</a>
```

## ✅ 正しいリンク形式

```html
<!-- ✅ 正しい形式：detail.php?slug=記事のslug -->
<a href="detail.php?slug=homepage-request-oita-5-points">大分でホームページ制事を依頼する前に知っておきたい5つのポイント</a>
```

## 📝 記事IDとslugの確認方法

記事のIDとslugを確認するには、以下のコマンドを実行してください：

```bash
php blog/helpers/link-helper.php
```

出力例：
```
記事ID → slug マッピング一覧
==============================
ID:  81 → slug: homepage-request-oita-5-points
        タイトル: 大分でホームページ制作を依頼する前に知っておきたい5つのポイント

ID:  82 → slug: homepage-renewal-5-signs
        タイトル: 古いホームページを放置していませんか？リニューアルすべき5つのサイン
...
```

## 🔧 ヘルパー関数を使ったリンク生成（推奨）

PHPで記事を生成する場合は、ヘルパー関数を使うことで安全にリンクを生成できます：

```php
<?php
require_once __DIR__ . '/helpers/link-helper.php';

// 方法1: 記事IDからリンクを生成
echo generateArticleLink(81, '大分でホームページ制作を依頼する前に知っておきたい5つのポイント');

// 方法2: slugからリンクを生成
echo generateArticleLinkBySlug('homepage-request-oita-5-points', '記事タイトル');

// 方法3: 関連記事ボックスを生成
echo generateRelatedArticleBox(81);
?>
```

## 🔍 リンクチェッカーの使い方

記事を作成・更新した後は、必ずリンクチェッカーを実行してください：

```bash
php blog/check-internal-links.php
```

### 出力例（問題がない場合）
```
==========================================
ブログ記事の内部リンクチェッカー
==========================================

読み込んだ記事数: 85

==========================================
チェック結果
==========================================

✅ 問題は見つかりませんでした！
```

### 出力例（問題がある場合）
```
==========================================
チェック結果
==========================================

【エラー】 3 件
--------------------
エラー: 古いホームページを放置していませんか？ に誤ったリンク形式があります: ../blog/article-81.html
  → 正しくは: detail.php?slug=homepage-request-oita-5-points
...

❌ 問題が見つかりました。上記を確認してください。
```

## 📋 記事作成時のチェックリスト

- [ ] 内部リンクは `detail.php?slug=XXX` 形式で記述している
- [ ] リンク先のslugが正しいか、`link-helper.php` で確認した
- [ ] 記事を作成・更新後、`check-internal-links.php` を実行してエラーがないことを確認した
- [ ] コミット前に再度チェッカーを実行した

## 🚨 404エラーページ

存在しないページにアクセスした場合、カスタム404エラーページ（`/404.php`）が表示されます。

## 💡 ベストプラクティス

1. **記事を作成する前に**、必ず最新の記事一覧を確認する
2. **リンクを貼る際は**、ヘルパー関数を使うか、slugを手動で確認する
3. **コミット前に**、必ずリンクチェッカーを実行する
4. **定期的に**、全記事のリンクチェックを実行する（週1回推奨）

## 🔄 GitHooks（推奨）

コミット前に自動でリンクチェックを実行するには、以下を `.git/hooks/pre-commit` に追加してください：

```bash
#!/bin/bash
echo "ブログ記事のリンクをチェック中..."
php blog/check-internal-links.php
if [ $? -ne 0 ]; then
    echo ""
    echo "❌ リンクエラーが見つかりました。修正してから再度コミットしてください。"
    exit 1
fi
echo "✅ リンクチェック完了"
```

実行権限を付与：
```bash
chmod +x .git/hooks/pre-commit
```
