# BNI Slide System - プロジェクト情報

## 📋 プロジェクト概要

**システム名**: BNI Slide System
**開発者**: 山田さん (yamada@yojitu.com)
**作成日**: 2024年12月
**最終更新**: 2025年12月6日

## 🎯 プロジェクトの背景

### 発端
- **最初の依頼**: 大分のそうりんチャプターから「スライド作成」を月1万円で受注
- **課題認識**: スライド作成だけでは根本的な解決にならない
- **解決策**: メンバーが自分でデータを入力し、自動でスライドが生成されるシステムを開発

### 目的
- BNIメンバーの週次データ（ビジター、リファーラル、出席状況など）を収集
- データを自動集計してスライド生成
- メンバーの負担軽減＋データの可視化

## 👥 顧客情報

**チャプター名**: 大分 宗麟チャプター
**会員数**: 50〜60名
**地域**: 大分県

## 💰 ビジネスモデル・収益目標

### 理想の収益構造
- **目標月額収入**: 10万円/月
- **契約形態**: 1年契約（月額課金）
- **課金モデル**: **メンバー一人ずつから料金をいただく形態**

### 料金計算（50-60名の場合）
- 50名の場合: 10万円 ÷ 50名 = **2,000円/人/月**
- 60名の場合: 10万円 ÷ 60名 = **1,667円/人/月**

### メリット
- メンバーが増えれば一人当たりの負担が減る
- チャプターにとって透明性の高い料金体系
- 開発者にとって安定した収入源

## 🏗️ システム規模

- **PHPファイル**: 52ファイル
- **総コード行数**: 約26,000行
- **API**: 13個
- **管理画面**: 5ページ

### 主要機能
1. ユーザー認証（ログイン/登録/パスワードリセット/2FA）
2. 週次アンケート入力・提出
3. ダッシュボード（個人/チーム統計）
4. データ管理（マイデータ編集）
5. 管理者機能（メンバー管理/監査ログ/データ編集）
6. 自動リマインダーメール（金曜19時、水曜20時、木曜20時）
7. CSVエクスポート
8. セキュリティ対策（CSRF/SQL injection/XSS対策）
9. SQLiteデータベース

## 🔐 セキュリティ対策履歴

### 2025年12月6日 - セキュリティ監査＆修正
整合性チェックで発見された問題を全て修正：

1. ✅ CSRF対策実装（全POSTエンドポイント）
2. ✅ オープンリダイレクト対策実装
3. ✅ HTTPヘッダーインジェクション対策
4. ✅ デバッグ情報削除
5. ✅ api_export_csv.phpエラーハンドリング追加
6. ✅ Exceptionメッセージ汎用化（11ファイル）
7. ✅ getTargetFriday()重複削除
8. ✅ writeAuditLogToDb()重複削除
9. ✅ パスワードリセット機能のCSRFトークン欠如修正

**コミット数**: 8コミット
**修正ファイル数**: 30ファイル以上

## 💰 確定料金モデル

### 宗麟チャプター向け料金（2025年12月6日確定）

**初期費用**: **5万円**
- システムセットアップ
- 初期データ投入
- 操作説明

**月額運用費**: **10万円/月**（1年契約）
- システム利用権（全メンバー）
- サーバー維持管理
- 週次リマインダーメール配信
- データバックアップ
- セキュリティアップデート
- 不具合修正
- **追加スライド作成対応**（納品後の追加要望含む）
- **軽微な機能追加・改修**
- 電話・メールサポート

### 料金設定の背景
- 納品後も「こういったスライドも欲しい」などの追加要望が見込まれる
- 月額10万円で追加要望にも柔軟に対応できる体制を維持
- メンバー一人当たり約2,000円（50名想定）の負担

### 別途費用が発生するケース
- 大規模な機能追加（新しいモジュール開発など）
- データベース構造の大幅変更
- 他システムとの連携開発
- デザインの全面リニューアル

### 展開可能性
- 他のBNIチャプターへの横展開
- 複数チャプター対応（マルチテナント化）
- より高度な分析機能の追加

## 🔗 関連ドキュメント

- [SECURITY_FIXES.md](./SECURITY_FIXES.md) - セキュリティ修正履歴
- [database/schema.sql](./database/schema.sql) - データベーススキーマ
- [SITE_SPECIFICATION.md](./SITE_SPECIFICATION.md) - サイト仕様書（もしあれば）

## 📧 連絡先

**開発者**: 山田さん
**メール**: yamada@yojitu.com
**サイト**: https://yojitu.com/bni-slide-system/
